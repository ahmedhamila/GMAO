from PyQt5 import QtCore, QtGui, QtWidgets
from datetime import datetime
from Models import AgentMaintenanceServices,ResponsableMaintenanceServices,EquipementServices
class Ui_Dialog(object):
    def __init__(self,mainWindowSelf) -> None:
        self.mainWindowSelf=mainWindowSelf
    
    def radioButtonClicked(self):
        if self.radioButtonPreventif.isChecked() :
            self.lineEditPreventif.setVisible(True)
            self.checkBoxActive.setVisible(True)
            self.lineEditCorrectif.setVisible(False)
        if self.radioButtonCorrectif.isChecked() :
            self.lineEditPreventif.setVisible(False)
            self.checkBoxActive.setVisible(False)
            self.lineEditCorrectif.setVisible(True)





#Initialization
        self.dateLiberation.setText("Date : "+datetime.date(datetime.now()).__str__())
        state,record = ResponsableMaintenanceServices.getResponsableMaintenance(self.mainWindowSelf.matricule)
        if state:
            self.labelEmetteur.setText(record[0][0]+" "+record[0][1]+" "+record[0][2])
        
        state,record = AgentMaintenanceServices.getAgentMaintenance()
        if state:
            for rec in record :
                self.comboBoxDestinateur.addItem(rec[0]+" "+rec[1]+" "+rec[2])

        state,record = EquipementServices.getEquipements()
        if state:
            for rec in record :
                self.comboBoxEquipement.addItem(rec[0]+" "+rec[1]+" "+rec[2])
        
        self.lineEditCorrectif.setVisible(False)
        self.lineEditPreventif.setVisible(False)
        self.checkBoxActive.setVisible(False)

        self.radioButtonCorrectif.clicked.connect(self.radioButtonClicked)
        self.radioButtonPreventif.clicked.connect(self.radioButtonClicked)